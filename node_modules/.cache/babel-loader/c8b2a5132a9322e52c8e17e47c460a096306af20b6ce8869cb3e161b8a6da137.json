{"ast":null,"code":"const timeOffsets={social:31,fundraiser:31,workshop:21,competition:90};const CALENDAR_ID=\"1e79b55343290be5c7bf935f61f48f8906b1e91d26116edc26b9ebbfe16d6cf8@group.calendar.google.com\";const API_KEY=\"AIzaSyA40eo7r7qepeP-wHgbFz4c4TUq_dNkydk\";function getEventType(){let description=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";if(description.includes(\"#tag: workshop\"))return\"workshop\";if(description.includes(\"#tag: competition\"))return\"competition\";if(description.includes(\"#tag: social\"))return\"social\";if(description.includes(\"#tag: fundraiser\"))return\"fundraiser\";return\"workshop\";// default to workshop if no tag found\n}const fetchEvents=async function(){let past=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;const now=new Date();const rangeStart=new Date(now);const rangeEnd=new Date(now);// Use the largest offset to fetch all possible events, then filter\nconst maxOffset=Math.max(...Object.values(timeOffsets));if(past){rangeStart.setDate(now.getDate()-maxOffset*2);rangeEnd.setDate(now.getDate());}else{rangeStart.setDate(now.getDate());rangeEnd.setDate(now.getDate()+maxOffset);}const timeMin=rangeStart.toISOString();const timeMax=rangeEnd.toISOString();const url=\"https://www.googleapis.com/calendar/v3/calendars/\".concat(CALENDAR_ID,\"/events?key=\").concat(API_KEY,\"&timeMin=\").concat(timeMin,\"&timeMax=\").concat(timeMax,\"&singleEvents=true&orderBy=startTime\");try{const response=await fetch(url);const data=await response.json();let events=data.items||[];// Filter events by tag and time window\nevents=events.filter(event=>{const type=getEventType(event.description||\"\");if(!type)return false;const eventDate=new Date(event.start.dateTime||event.start.date);let offset=timeOffsets[type];if(past)offset*=2;if(past){const minDate=new Date(now);minDate.setDate(now.getDate()-offset);return eventDate>=minDate&&eventDate<now;}else{const maxDate=new Date(now);maxDate.setDate(now.getDate()+offset);return eventDate>=now&&eventDate<=maxDate;}});// Sort events\nevents.sort((a,b)=>{const dateA=new Date(a.start.dateTime||a.start.date).getTime();const dateB=new Date(b.start.dateTime||b.start.date).getTime();return past?dateB-dateA:dateA-dateB;});return events;}catch(error){console.error(\"Error fetching events:\",error);return[];}};export default fetchEvents;","map":{"version":3,"names":["timeOffsets","social","fundraiser","workshop","competition","CALENDAR_ID","API_KEY","getEventType","description","arguments","length","undefined","includes","fetchEvents","past","now","Date","rangeStart","rangeEnd","maxOffset","Math","max","Object","values","setDate","getDate","timeMin","toISOString","timeMax","url","concat","response","fetch","data","json","events","items","filter","event","type","eventDate","start","dateTime","date","offset","minDate","maxDate","sort","a","b","dateA","getTime","dateB","error","console"],"sources":["C:/ACM_Website/src/components/fetchEvents.js"],"sourcesContent":["const timeOffsets = {\r\n  social: 31,\r\n  fundraiser: 31,\r\n  workshop: 21,\r\n  competition: 90,\r\n};\r\n\r\nconst CALENDAR_ID = \"1e79b55343290be5c7bf935f61f48f8906b1e91d26116edc26b9ebbfe16d6cf8@group.calendar.google.com\";\r\nconst API_KEY = \"AIzaSyA40eo7r7qepeP-wHgbFz4c4TUq_dNkydk\";\r\n\r\nfunction getEventType(description = \"\") {\r\n  if (description.includes(\"#tag: workshop\")) return \"workshop\";\r\n  if (description.includes(\"#tag: competition\")) return \"competition\";\r\n  if (description.includes(\"#tag: social\")) return \"social\";\r\n  if (description.includes(\"#tag: fundraiser\")) return \"fundraiser\";\r\n  return \"workshop\"; // default to workshop if no tag found\r\n}\r\n\r\nconst fetchEvents = async (past = false) => {\r\n  const now = new Date();\r\n  const rangeStart = new Date(now);\r\n  const rangeEnd = new Date(now);\r\n\r\n  // Use the largest offset to fetch all possible events, then filter\r\n  const maxOffset = Math.max(...Object.values(timeOffsets));\r\n  if (past) {\r\n    rangeStart.setDate(now.getDate() - maxOffset * 2);\r\n    rangeEnd.setDate(now.getDate());\r\n  } else {\r\n    rangeStart.setDate(now.getDate());\r\n    rangeEnd.setDate(now.getDate() + maxOffset);\r\n  }\r\n\r\n  const timeMin = rangeStart.toISOString();\r\n  const timeMax = rangeEnd.toISOString();\r\n\r\n  const url = `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?key=${API_KEY}&timeMin=${timeMin}&timeMax=${timeMax}&singleEvents=true&orderBy=startTime`;\r\n\r\n  try {\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    let events = data.items || [];\r\n\r\n    // Filter events by tag and time window\r\n    events = events.filter(event => {\r\n      const type = getEventType(event.description || \"\");\r\n      if (!type) return false;\r\n\r\n      const eventDate = new Date(event.start.dateTime || event.start.date);\r\n      let offset = timeOffsets[type];\r\n      if (past) offset *= 2;\r\n\r\n      if (past) {\r\n        const minDate = new Date(now);\r\n        minDate.setDate(now.getDate() - offset);\r\n        return eventDate >= minDate && eventDate < now;\r\n      } else {\r\n        const maxDate = new Date(now);\r\n        maxDate.setDate(now.getDate() + offset);\r\n        return eventDate >= now && eventDate <= maxDate;\r\n      }\r\n    });\r\n\r\n    // Sort events\r\n    events.sort((a, b) => {\r\n      const dateA = new Date(a.start.dateTime || a.start.date).getTime();\r\n      const dateB = new Date(b.start.dateTime || b.start.date).getTime();\r\n      return past ? dateB - dateA : dateA - dateB;\r\n    });\r\n\r\n    return events;\r\n  } catch (error) {\r\n    console.error(\"Error fetching events:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default fetchEvents;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}