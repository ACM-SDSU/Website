{"ast":null,"code":"import{useEffect,useMemo,useRef,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BackgroundFX(_ref){let{images,interval=3000,fade=2000}=_ref;const[index,setIndex]=useState(0);const[loaded,setLoaded]=useState(()=>images.map(()=>false));const timerRef=useRef(null);// Preload all images once\nuseEffect(()=>{let mounted=true;images.forEach((src,i)=>{const img=new Image();img.onload=()=>mounted&&setLoaded(prev=>{const next=[...prev];next[i]=true;return next;});img.onerror=img.onload;// treat error as loaded to avoid stalling\nimg.src=src;});return()=>{mounted=false;};},[images]);// Only advance to the next image if it's loaded\nuseEffect(()=>{clearInterval(timerRef.current);timerRef.current=setInterval(()=>{const next=(index+1)%images.length;if(loaded[next]){setIndex(next);}// if not loaded yet, skip this tick; we'll try again next interval\n},interval);return()=>clearInterval(timerRef.current);},[index,images.length,interval,loaded]);// Optional: start at the first loaded image to avoid initial flash\nconst initialIndex=useMemo(()=>loaded.findIndex(Boolean),[loaded]);return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-[0] pointer-events-none bg-black\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black\"}),images.map((src,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-cover bg-center \".concat(// If nothing loaded yet, show nothing; once at least one is loaded,\n// show the chosen index.\nloaded[i]&&(i===index||initialIndex===i&&!loaded[index])?\"opacity-100\":\"opacity-0\"),style:{backgroundImage:\"url(\".concat(src,\")\"),transition:\"opacity \".concat(fade,\"ms ease-in-out\"),willChange:\"opacity\"}},i)),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/50\"})]});}","map":{"version":3,"names":["useEffect","useMemo","useRef","useState","jsx","_jsx","jsxs","_jsxs","BackgroundFX","_ref","images","interval","fade","index","setIndex","loaded","setLoaded","map","timerRef","mounted","forEach","src","i","img","Image","onload","prev","next","onerror","clearInterval","current","setInterval","length","initialIndex","findIndex","Boolean","className","children","concat","style","backgroundImage","transition","willChange"],"sources":["C:/acm-website/src/components/hackathon_nov2025/BackgroundFX.js"],"sourcesContent":["import { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\nexport default function BackgroundFX({ images, interval = 3000, fade = 2000 }) {\r\n  const [index, setIndex] = useState(0);\r\n  const [loaded, setLoaded] = useState(() => images.map(() => false));\r\n  const timerRef = useRef(null);\r\n\r\n  // Preload all images once\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    images.forEach((src, i) => {\r\n      const img = new Image();\r\n      img.onload = () => mounted && setLoaded(prev => {\r\n        const next = [...prev];\r\n        next[i] = true;\r\n        return next;\r\n      });\r\n      img.onerror = img.onload; // treat error as loaded to avoid stalling\r\n      img.src = src;\r\n    });\r\n    return () => { mounted = false; };\r\n  }, [images]);\r\n\r\n  // Only advance to the next image if it's loaded\r\n  useEffect(() => {\r\n    clearInterval(timerRef.current);\r\n    timerRef.current = setInterval(() => {\r\n      const next = (index + 1) % images.length;\r\n      if (loaded[next]) {\r\n        setIndex(next);\r\n      }\r\n      // if not loaded yet, skip this tick; we'll try again next interval\r\n    }, interval);\r\n    return () => clearInterval(timerRef.current);\r\n  }, [index, images.length, interval, loaded]);\r\n\r\n  // Optional: start at the first loaded image to avoid initial flash\r\n  const initialIndex = useMemo(() => loaded.findIndex(Boolean), [loaded]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[0] pointer-events-none bg-black\">\r\n      {/* solid black base prevents any white flash */}\r\n      <div className=\"absolute inset-0 bg-black\" />\r\n\r\n      {images.map((src, i) => (\r\n        <div\r\n          key={i}\r\n          className={`absolute inset-0 bg-cover bg-center ${\r\n            // If nothing loaded yet, show nothing; once at least one is loaded,\r\n            // show the chosen index.\r\n            (loaded[i] && (i === index || (initialIndex === i && !loaded[index])))\r\n              ? \"opacity-100\"\r\n              : \"opacity-0\"\r\n          }`}\r\n          style={{\r\n            backgroundImage: `url(${src})`,\r\n            transition: `opacity ${fade}ms ease-in-out`,\r\n            willChange: \"opacity\",\r\n          }}\r\n        />\r\n      ))}\r\n\r\n      {/* readability overlay (keeps the vibe dark) */}\r\n      <div className=\"absolute inset-0 bg-black/50\" />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}