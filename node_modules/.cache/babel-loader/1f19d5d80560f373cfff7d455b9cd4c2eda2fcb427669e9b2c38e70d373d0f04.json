{"ast":null,"code":"const fetchEvents = async (past = false) => {\n  const API_KEY = \"AIzaSyA40eo7r7qepeP-wHgbFz4c4TUq_dNkydk\";\n  const CALENDAR_ID = \"1e79b55343290be5c7bf935f61f48f8906b1e91d26116edc26b9ebbfe16d6cf8@group.calendar.google.com\";\n  const MAJOR_CALENDAR_ID = \"e02db2fdfdf2fba777e3d5e451b87c7f7a7e5a82716006da59a5052e04b6a964@group.calendar.google.com\";\n  const now = new Date();\n  const rangeStart = new Date(now);\n  const rangeEnd = new Date(now);\n  if (past) {\n    rangeStart.setDate(now.getDate() - 60); // Look 60 days back\n    rangeEnd.setDate(now.getDate() - 1); // Up to yesterday\n  } else {\n    rangeStart.setDate(now.getDate() - 1); // Start from yesterday to catch ongoing events\n    rangeEnd.setDate(now.getDate() + 21); // Upcoming 21 days for base\n  }\n  const timeMin = rangeStart.toISOString();\n  const timeMax = rangeEnd.toISOString();\n  const timeMax_major = past ? new Date(new Date().setDate(now.getDate() - 1)).toISOString() // Same end for major in past\n  : new Date(new Date().setDate(now.getDate() + 60)).toISOString(); // 60 days in future\n\n  const url_base = `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?key=${API_KEY}&timeMin=${timeMin}&timeMax=${timeMax}&singleEvents=true&orderBy=startTime`;\n  const url_major = `https://www.googleapis.com/calendar/v3/calendars/${MAJOR_CALENDAR_ID}/events?key=${API_KEY}&timeMin=${timeMin}&timeMax=${timeMax_major}&singleEvents=true&orderBy=startTime`;\n  try {\n    const response = await fetch(url_base);\n    const data_basic = await response.json();\n    const response_major = await fetch(url_major);\n    const data_major = await response_major.json();\n    const combinedEvents = [...(data_basic.items || []), ...(data_major.items || [])];\n    combinedEvents.sort((a, b) => {\n      const dateA = new Date(a.start.dateTime || a.start.date).getTime();\n      const dateB = new Date(b.start.dateTime || b.start.date).getTime();\n      return past ? dateB - dateA : dateA - dateB; // Reverse sort for past\n    });\n    return combinedEvents;\n  } catch (error) {\n    console.error(\"Error fetching events:\", error);\n    return [];\n  }\n};\nexport default fetchEvents;","map":{"version":3,"names":["fetchEvents","past","API_KEY","CALENDAR_ID","MAJOR_CALENDAR_ID","now","Date","rangeStart","rangeEnd","setDate","getDate","timeMin","toISOString","timeMax","timeMax_major","url_base","url_major","response","fetch","data_basic","json","response_major","data_major","combinedEvents","items","sort","a","b","dateA","start","dateTime","date","getTime","dateB","error","console"],"sources":["/home/everett/acm-website/src/components/fetchEvents.js"],"sourcesContent":["const fetchEvents = async (past = false) => {\n    const API_KEY = \"AIzaSyA40eo7r7qepeP-wHgbFz4c4TUq_dNkydk\";\n    const CALENDAR_ID = \"1e79b55343290be5c7bf935f61f48f8906b1e91d26116edc26b9ebbfe16d6cf8@group.calendar.google.com\";\n    const MAJOR_CALENDAR_ID = \"e02db2fdfdf2fba777e3d5e451b87c7f7a7e5a82716006da59a5052e04b6a964@group.calendar.google.com\";\n  \n    const now = new Date();\n    const rangeStart = new Date(now);\n    const rangeEnd = new Date(now);\n  \n    if (past) {\n      rangeStart.setDate(now.getDate() - 60); // Look 60 days back\n      rangeEnd.setDate(now.getDate() - 1);    // Up to yesterday\n    } else {\n      rangeStart.setDate(now.getDate() - 1);  // Start from yesterday to catch ongoing events\n      rangeEnd.setDate(now.getDate() + 21);   // Upcoming 21 days for base\n    }\n  \n    const timeMin = rangeStart.toISOString();\n    const timeMax = rangeEnd.toISOString();\n  \n    const timeMax_major = past\n      ? new Date(new Date().setDate(now.getDate() - 1)).toISOString() // Same end for major in past\n      : new Date(new Date().setDate(now.getDate() + 60)).toISOString(); // 60 days in future\n  \n    const url_base = `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?key=${API_KEY}&timeMin=${timeMin}&timeMax=${timeMax}&singleEvents=true&orderBy=startTime`;\n    const url_major = `https://www.googleapis.com/calendar/v3/calendars/${MAJOR_CALENDAR_ID}/events?key=${API_KEY}&timeMin=${timeMin}&timeMax=${timeMax_major}&singleEvents=true&orderBy=startTime`;\n  \n    try {\n      const response = await fetch(url_base);\n      const data_basic = await response.json();\n  \n      const response_major = await fetch(url_major);\n      const data_major = await response_major.json();\n  \n      const combinedEvents = [...(data_basic.items || []), ...(data_major.items || [])];\n  \n      combinedEvents.sort((a, b) => {\n        const dateA = new Date(a.start.dateTime || a.start.date).getTime();\n        const dateB = new Date(b.start.dateTime || b.start.date).getTime();\n        return past ? dateB - dateA : dateA - dateB; // Reverse sort for past\n      });\n  \n      return combinedEvents;\n    } catch (error) {\n      console.error(\"Error fetching events:\", error);\n      return [];\n    }\n  };\n  \n  export default fetchEvents;\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}